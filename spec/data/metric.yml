data_mixins:
  metric:
    class: MetricMixin
    fields:
      metric:
        type: "@django.ForeignKey"
        relation: metric
        options:
          "null": true
          on_delete: "@django.CASCADE"
          editable: false

  metrics:
    class: MetricRelationMixin
    fields:
      metrics:
        type: "@django.ManyToManyField"
        relation: metric

data_base:
  metric:
    class: MetricBase
    base: resource
    mixins: [metric]
    id_fields: [metric_id, name]
    meta:
      unique_together: [metric, name]
      scope: metric

data:
  metric:
    class: Metric
    base: model_training
    roles:
      edit: [scheduler]
      view: [scheduler, predicter]
    fields:
      value:
        type: "@django.FloatField"
        options:
          "null": false

command_mixins:
  metric:
    class: MetricMixin
    mixins: [model_training]
    meta:
      metric:
        data: metric
        priority: 4

command_base:
  metric:
    mixins: [metric]
    server_enabled: true
    groups_allowed: [scheduler, predicter]

command:
  model:
    training:
      metric:
        resource: metric
        base: metric
        base_name: metric
        priority: 100
