data_mixins:
  model_config:
    class: ModelConfigMixin
    fields:
      config:
        type: "@django.ForeignKey"
        relation: model_config
        options:
          "null": true
          on_delete: "@django.CASCADE"
          editable: false

  model_configs:
    class: ModelConfigRelationMixin
    fields:
      configs:
        type: "@django.ManyToManyField"
        relation: model_config

data_base:
  model_config:
    class: ModelConfigBase
    base: resource
    mixins: [model_config]
    id_fields: [config_id, name]
    meta:
      unique_together: [config, name]
      scope: config

data:
  model_config:
    class: ModelConfig
    base: model
    mixins: [library, hyperparameters]
    roles:
      edit: [scheduler, predicter]
      view: [scheduler, predicter]
    meta:
      verbose_name: config

command_mixins:
  model_config:
    class: ModelConfigMixin
    mixins: [model, library, hyperparameter]
    meta:
      config:
        data: model_config
        priority: 2

command_base:
  model_config:
    mixins: [model_config]
    server_enabled: true
    groups_allowed: [scheduler, predicter]

command:
  model:
    config:
      resource: model_config
      base: model_config
      base_name: config
      priority: 100
