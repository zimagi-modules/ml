data_mixins:
  engine:
    class: EngineMixin
    fields:
      engine:
        type: "@django.ForeignKey"
        relation: engine
        options:
          "null": true
          on_delete: "@django.CASCADE"
          editable: false

  engines:
    class: EngineRelationMixin
    fields:
      engines:
        type: "@django.ManyToManyField"
        relation: engine

data_base:
  engine:
    class: EngineBase
    base: resource
    mixins: [engine]
    id_fields: [engine_id, name]
    meta:
      unique_together: [engine, name]
      scope: engine

data:
  engine:
    class: Engine
    base: environment
    roles:
      edit: [scheduler]
      view: [scheduler, predicter]
    fields:
      machine:
        type: "@django.CharField"
        options:
          "null": false
          max_length: 255

command_mixins:
  engine:
    class: EngineMixin
    meta:
      engine:
        data: engine
        priority: 1

command_base:
  engine:
    mixins: [engine]
    server_enabled: true
    groups_allowed: [scheduler, predicter]

command:
  engine:
    resource: engine
    base: engine
    base_name: engine
    priority: 160
